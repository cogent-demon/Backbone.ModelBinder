<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta content="text/html;charset=UTF-8" http-equiv="Content-Type"/>
  <title>JustTheView</title>

  <!-- include source files here... -->
  <script type="text/javascript" src="../../public/javascripts/underscore.js"></script>
  <script type="text/javascript" src="../../public/javascripts/jquery.js"></script>
  <script type="text/javascript" src="../../public/javascripts/backbone.js"></script>
  <script type="text/javascript" src="../../backbone.modelbinding.js"></script>

  <script>
    $().ready(function () {
      modelA = new Backbone.Model();
//      modelB = new Backbone.Model();
//      modelA.set({modelB: modelB});

      modelA.bind('change', function(){
        $('#placeForModel').html(JSON.stringify(modelA.toJSON()));

//        for(var changedAtt in modelA.changedAttributes()){
//          var attEl = $('[name=' + changedAtt + ']', viewA.$el);
//          attEl.val(modelA.get(changedAtt));
//        }
      });

      ViewClassA = Backbone.View.extend({
        id: 'outerDiv',
        
//        events: {
//          // View to Model updates
//          'change input': function(event){
//            var changedName = $(event.currentTarget).attr('name');
//            var newVal = $(event.currentTarget).val();
//            var data = {};
//            data[changedName] = newVal;
//            modelA.set(data);
//          }
//        },
        
        render: function(){
          var html = '\
          Field 1: <input type="text" name="field1"/><br>\
          Field 2: <input type="text" name="field2"/><br>\
            <div id="innerDiv" style="margin-left: 20px; border: 2px">\
            Field 1: <input type="text" name="field1"/><br>\
            Field 2: <input type="text" name="field2"/><br>\
            </div>\
          Field 5: <input type="text" name="field5"/><br>\
            Field 6: <input type="text" name="field6"/><br>\
          ';
          $(this.$el).html(html);
          return this;
        }        
      });

      viewA = new ViewClassA({model:modelA});
      $('#placeForOuterDiv').append(viewA.render().$el);

      Backbone.ModelBinding.bind(viewA, {all: 'name'});

      // bulk set

    });
  </script>

</head>
<body>
  Model A: <div id="placeForModel"></div><br><br>
  <div id="placeForOuterDiv"></div>
</body>
</html>
